---
title: "6:58:54 PM - October 3, 2025"
date: 2025-10-03T05:58:54.543Z
timestamp: 1759471134543
---

## Project Notes

**Fixed Ghost Video Auto-Play Bug on Camera Screen (Attempt #1000+)**

**Root Cause Identified**:
The camera screen was correctly pausing all videos, but VideoPageView in background tabs (kept alive by IndexedStack) was re-activating them during its post-frame callback. The issue was:

1. Camera screen calls `pauseAllVideos()` âœ…
2. VideoPageView (in inactive tab) checks `tabVisibilityProvider` in initState
3. Tab visibility check was STALE - returns true even though tab is no longer active
4. VideoPageView sets active video in post-frame callback
5. VideoFeedItem listens to active video state and starts playing

**The Fix**:
Added `clearActiveVideo()` BEFORE `pauseAllVideos()` in camera screen initState. This prevents the race condition where background tabs try to set themselves as active.

**Code Location**: `lib/screens/pure/universal_camera_screen_pure.dart:42-57`

**Key Insight**: The activeVideo state is the single source of truth for playback. Clearing it prevents ALL VideoFeedItems from playing, regardless of tab visibility bugs.

This follows the same pattern we used in `_processRecording` (line 803) where we clear active video before navigation.
