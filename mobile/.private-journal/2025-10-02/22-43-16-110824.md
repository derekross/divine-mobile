---
title: "10:43:16 PM - October 2, 2025"
date: 2025-10-02T09:43:16.110Z
timestamp: 1759398196110
---

## Project Notes

**OpenVine Recording → Draft Flow Issue**

User workflow bug: Record video → Navigate back → Recording deleted

Created comprehensive TDD test suite covering:
- Auto-save draft on back navigation after recording completes
- Cleanup shouldn't delete draft files
- Single timer for auto-stop (no race condition)

Files modified:
- `test/integration/camera_draft_autosave_test.dart` - New test suite
- `lib/providers/app_providers.dart` - Added draftStorageServiceProvider
- Imports: Added `draft_storage_service.dart` and `shared_preferences`

Pattern for async Riverpod providers in this codebase:
```dart
@riverpod
Future<ServiceType> serviceName(Ref ref) async {
  final prefs = await ref.watch(sharedPreferencesProvider.future);
  return ServiceType(prefs);
}
```
